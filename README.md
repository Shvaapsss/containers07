# Лабораторная работа №6: Создание многоконтейнерного приложения

## Цель работы
Ознакомиться с работой многоконтейнерного приложения на базе docker-compose.

## Задание
Создать PHP-приложение с использованием трех контейнеров: nginx, php-fpm, mariadb. Использовать docker-compose для запуска и управления контейнерами.

## Выполнение

1. Создан репозиторий `containers06` и склонирован на локальную машину.
2. В директории `mounts/site` размещен PHP-сайт, ранее разработанный в лабораторной работе №5.
3. Создан конфигурационный файл `nginx/default.conf`, настроенный для обработки PHP.
4. Создан файл `docker-compose.yml`, включающий три сервиса:
   - `frontend` – nginx
   - `backend` – php-fpm
   - `database` – mariadb
5. Создан файл `mysql.env` с параметрами доступа к БД.
6. Добавлен файл `app.env` с переменной окружения `APP_VERSION`.
7. Запуск приложения выполнен командой:
```
docker-compose up -d
```
8. Проверена работа сайта по адресу http://localhost.

## Ответы на вопросы

1. **В каком порядке запускаются контейнеры?**  
Контейнеры запускаются параллельно, однако в зависимости от зависимости между сервисами (например, nginx ожидает php-fpm), важно, чтобы все сервисы были готовы. Порядок в `docker-compose.yml` не гарантирует последовательность запуска.

2. **Где хранятся данные базы данных?**  
Данные хранятся в Docker volume с именем `db_data`, монтируемом в контейнер `database` по пути `/var/lib/mysql`.

3. **Как называются контейнеры проекта?**  
По умолчанию названия контейнеров формируются как `<имя_директории>_<имя_сервиса>_1`, например:
- `containers06_frontend_1`
- `containers06_backend_1`
- `containers06_database_1`

4. **Как добавить переменную окружения APP_VERSION в backend и frontend?**  
Создать файл `app.env` с переменной:

```
APP_VERSION=1.0.0
```
И указать его в секции `env_file` у сервисов `frontend` и `backend` в `docker-compose.yml`.

## Выводы
Были успешно развернуты и протестированы многоконтейнерные приложения с использованием `docker-compose`. Изучена работа с переменными окружения, томами, сетями и настройкой взаимодействия между сервисами.
